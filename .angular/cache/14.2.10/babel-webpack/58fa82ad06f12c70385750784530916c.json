{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../service/userservice.service\";\nimport * as i3 from \"@angular/common\";\n\nfunction UserproductdetailComponent_div_1_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function UserproductdetailComponent_div_1_button_9_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.AddTocart());\n    });\n    i0.ɵɵtext(1, \"Add to Cart\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UserproductdetailComponent_div_1_button_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function UserproductdetailComponent_div_1_button_15_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.RemovetoCart(ctx_r5.productdetailsData.id));\n    });\n    i0.ɵɵtext(1, \"Remove\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction UserproductdetailComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵelement(1, \"div\", 3);\n    i0.ɵɵelementStart(2, \"div\", 4);\n    i0.ɵɵelement(3, \"img\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 4)(5, \"h4\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, UserproductdetailComponent_div_1_button_9_Template, 2, 0, \"button\", 6);\n    i0.ɵɵelementStart(10, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function UserproductdetailComponent_div_1_Template_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.handleQuantity(\"max\"));\n    });\n    i0.ɵɵtext(11, \"+\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"input\", 8);\n    i0.ɵɵelementStart(13, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function UserproductdetailComponent_div_1_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.handleQuantity(\"min\"));\n    });\n    i0.ɵɵtext(14, \"-\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, UserproductdetailComponent_div_1_button_15_Template, 2, 0, \"button\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"div\", 11);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r0.productdetailsData.productimage, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.productdetailsData.productname);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.productdetailsData.productdescription);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.removeCart);\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"value\", ctx_r0.productQuantity);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.removeCart);\n  }\n}\n\nexport let UserproductdetailComponent = /*#__PURE__*/(() => {\n  class UserproductdetailComponent {\n    constructor(router, pro) {\n      this.router = router;\n      this.pro = pro;\n      this.productQuantity = 1;\n      this.removeCart = false;\n    }\n\n    ngOnInit() {\n      let producdetailId = this.router.snapshot.paramMap.get('productId');\n      producdetailId && this.pro.getProduct(producdetailId).subscribe(result => {\n        this.productdetailsData = result;\n        let cartData = localStorage.getItem('localCart');\n\n        if (producdetailId && cartData) {\n          let items = JSON.parse(cartData);\n          items = items.filter(item => producdetailId == item.id.toString());\n\n          if (items.length) {\n            this.removeCart = true;\n          } else {\n            this.removeCart = false;\n          }\n        }\n\n        let user = localStorage.getItem('user');\n\n        if (user) {\n          let userdta = user && JSON.parse(user)[0];\n          let userId = userdta?.id;\n          this.pro.getcartList(userId);\n          this.pro.cartNewData.subscribe(result => {\n            let item = result.filter(item => producdetailId?.toString() === item.productid?.toString());\n\n            if (item.length) {\n              this.cartDtaa = item[0];\n              this.removeCart = true;\n            }\n          });\n        }\n      });\n    }\n\n    handleQuantity(val) {\n      if (this.productQuantity < 20 && val === 'max') {\n        this.productQuantity += 1;\n      } else if (this.productQuantity > 1 && val === 'min') {\n        this.productQuantity -= 1;\n      }\n    }\n\n    AddTocart() {\n      if (this.productdetailsData) {\n        this.productdetailsData.quantity = this.productQuantity;\n\n        if (!localStorage.getItem('user')) {\n          this.pro.localAddtocart(this.productdetailsData);\n          this.removeCart = true;\n        } else {\n          let user = localStorage.getItem('user');\n          let userdta = user && JSON.parse(user)[0];\n          let userId = userdta?.id;\n          let cartDta = { ...this.productdetailsData,\n            userId,\n            productid: this.productdetailsData.id\n          };\n          delete cartDta.id;\n          this.pro.Addtokrt(cartDta).subscribe(result => {\n            if (result) {\n              this.pro.getcartList(userId);\n              this.removeCart = true;\n            }\n          });\n        }\n      }\n    }\n\n    RemovetoCart(productId) {\n      if (!localStorage.getItem('user')) {\n        this.pro.RemoveItem(productId);\n      } else {\n        let user = localStorage.getItem('user');\n        let userdta = user && JSON.parse(user)[0];\n        let userId = userdta?.id;\n        this.cartDtaa && this.pro.removeFromcart(this.cartDtaa?.id).subscribe(result => {\n          if (result) {\n            this.pro.getcartList(userId);\n          }\n        });\n        this.removeCart = false;\n      }\n    }\n\n  }\n\n  UserproductdetailComponent.ɵfac = function UserproductdetailComponent_Factory(t) {\n    return new (t || UserproductdetailComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.UserserviceService));\n  };\n\n  UserproductdetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: UserproductdetailComponent,\n    selectors: [[\"app-userproductdetail\"]],\n    decls: 2,\n    vars: 1,\n    consts: [[1, \"product\"], [\"class\", \"row\", 4, \"ngIf\"], [1, \"row\"], [1, \"col-sm-1\"], [1, \"col-sm-4\"], [3, \"src\"], [\"class\", \"btn btn-warning\", 3, \"click\", 4, \"ngIf\"], [2, \"margin-left\", \"2%\", 3, \"click\"], [\"type\", \"text\", 3, \"value\"], [3, \"click\"], [3, \"click\", 4, \"ngIf\"], [1, \"col-sm-3\"], [1, \"btn\", \"btn-warning\", 3, \"click\"]],\n    template: function UserproductdetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, UserproductdetailComponent_div_1_Template, 17, 6, \"div\", 1);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.productdetailsData);\n      }\n    },\n    dependencies: [i3.NgIf],\n    styles: [\"img[_ngcontent-%COMP%]{width:100%;height:100%}.product[_ngcontent-%COMP%]{background-color:#fff;margin-top:2%}button[_ngcontent-%COMP%]{color:#000}input[_ngcontent-%COMP%]{width:5%}a[_ngcontent-%COMP%]{color:#000;text-decoration:none}\"]\n  });\n  return UserproductdetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}